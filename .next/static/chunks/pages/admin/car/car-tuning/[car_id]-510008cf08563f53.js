(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{7570:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/car/car-tuning/[car_id]",function(){return a(1417)}])},6988:(e,s,a)=>{"use strict";a.d(s,{A:()=>h});var n=a(4848),r=a(6540),i=a(1106),l=a.n(i),c=a(7669),t=a(4890),o=a(6715),d=a(4335);let h=e=>{let{theme:s}=e;r.useEffect(()=>{(0,t.A)()},[]);let a=(0,o.useRouter)(),i=async()=>{try{let e=localStorage.getItem("authToken");if(!e){console.log("No token found, user is not authenticated");return}let s=await d.A.post("https://back-end.topspeed-performance.de/api/logout",{},{headers:{Authorization:"Bearer ".concat(e)}});200===s.status&&(localStorage.removeItem("authToken"),alert("You have successfully logged out"),a.push("/"))}catch(e){console.error("Error during logout:",e),alert("An error occurred while logging out")}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{id:"navi",className:"topnav ".concat(s&&"light"===s?"light":""),children:(0,n.jsxs)("div",{className:"container-fluid",children:[(0,n.jsx)("div",{className:"logo",children:(0,n.jsx)(l(),{legacyBehavior:!0,href:"/",children:s&&"light"===s?(0,n.jsx)("img",{src:c.EW,alt:"logo"}):(0,n.jsx)("img",{src:c.Mx,alt:"logo"})})}),(0,n.jsxs)("div",{className:"menu-icon",children:[(0,n.jsxs)("span",{className:"icon",children:[(0,n.jsx)("i",{}),(0,n.jsx)("i",{})]}),(0,n.jsx)("span",{className:"text","data-splitting":!0,children:(0,n.jsx)("span",{className:"menu-text word",children:"Menu"})})]})]})}),(0,n.jsx)("div",{className:"hamenu",children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-lg-9 col-md-8",children:(0,n.jsx)("div",{className:"menu-links",children:(0,n.jsxs)("ul",{className:"main-menu",children:[(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"o-hidden",children:(0,n.jsx)(l(),{legacyBehavior:!0,href:"/",children:(0,n.jsxs)("a",{className:"link",children:[(0,n.jsx)("span",{className:"nm",children:"01."}),"Startseite"]})})})}),(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"o-hidden",children:(0,n.jsx)(l(),{legacyBehavior:!0,href:"/admin/new-blog/",children:(0,n.jsxs)("a",{className:"link",children:[(0,n.jsx)("span",{className:"nm",children:"02."}),"Neue Neuigkeite"]})})})}),(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"o-hidden",children:(0,n.jsx)(l(),{legacyBehavior:!0,href:"/admin/car/search-car/",children:(0,n.jsxs)("a",{className:"link",children:[(0,n.jsx)("span",{className:"nm",children:"03."}),"Auto nach Name suchen"]})})})}),(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"o-hidden",children:(0,n.jsx)(l(),{legacyBehavior:!0,href:"/admin/car/new-car",children:(0,n.jsxs)("a",{className:"link",children:[(0,n.jsx)("span",{className:"nm",children:"04."}),"Neues Auto"]})})})}),(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"o-hidden",children:(0,n.jsx)(l(),{legacyBehavior:!0,href:"/admin/car/tuning-eigenschaften-hinzufuegen/",children:(0,n.jsxs)("a",{className:"link",children:[(0,n.jsx)("span",{className:"nm",children:"05."}),"Tuning und Eigenschaften"]})})})})]})})}),(0,n.jsx)("div",{className:"col-lg-3 col-md-4",children:(0,n.jsxs)("div",{className:"cont-info",children:[(0,n.jsxs)("div",{className:"item",children:[(0,n.jsx)("h6",{children:"Nummer : "}),(0,n.jsx)("p",{children:"034294/843751"})]}),(0,n.jsxs)("div",{className:"item",children:[(0,n.jsx)("h6",{children:"Offizielle Adresse :"}),(0,n.jsx)("p",{children:"Am Bahndamm 9, 04509 Krostitz"})]}),(0,n.jsxs)("div",{className:"item",children:[(0,n.jsx)("h6",{children:"E-Mail"}),(0,n.jsx)("p",{children:(0,n.jsx)("a",{href:"mailto:info@vtec-chiptuning.com?subject=Subject",children:"info@vtec-chiptuning.com"})})]}),(0,n.jsx)("div",{className:"item",children:(0,n.jsx)("button",{onClick:i,className:"admin-logout-btn mt-25",children:"Logout"})})]})})]})})})]})}},1417:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var n=a(4848),r=a(6540),i=a(6715),l=a(6308),c=a(6988),t=a(3866),o=a(9242),d=a(4335);let h=e=>{let{car_id:s}=e,[a,l]=(0,r.useState)([]),[c,t]=(0,r.useState)([]),[o,h]=(0,r.useState)([]),[m,u]=(0,r.useState)({vehicle_id:s||"",tunings:[]}),x=(0,i.useRouter)();(0,r.useEffect)(()=>{(async()=>{try{let e=await d.A.get("https://back-end.topspeed-performance.de/api/vehicle/tuning");l(e.data)}catch(e){console.error("Error fetching tunings:",e)}})()},[]),(0,r.useEffect)(()=>{s&&(async()=>{try{let e=await d.A.get("https://back-end.topspeed-performance.de/api/vehicle/tuning-by-id",{params:{vehicle_id:s}});e.data&&h(e.data)}catch(e){console.error("Error fetching existing tunings:",e)}})()},[s]);let g=(e,s,a)=>{t(n=>n.map((n,r)=>r===e?{...n,[s]:a}:n))},j=e=>{t(s=>s.filter((s,a)=>a!==e))},p=async e=>{e.preventDefault();let a={vehicle_id:s,tunings:c.map(e=>({tuning_id:e.id,difference_power:e.difference_power||0,difference_torque:e.difference_torque||0,max_power:e.max_power||0,max_torque:e.max_torque||0,power_chart:e.power_chart||"",torque_chart:e.torque_chart||"",tuning_stage:e.name||"",price:e.price||0}))};try{let e=await d.A.post("https://back-end.topspeed-performance.de/api/vehicle/tuning/add",a);console.log("databedor",a),console.log("Tuning added successfully:",e.data),alert("Tuning added successfully: ".concat(e.data.message))}catch(e){console.error("Error adding tuning:",e)}},f=e=>{x.push({pathname:"/admin/car/tuning-eigenschaften/tuning-eigenschaften",query:{car_id:s,tuning_id:e}})};return(0,n.jsx)("div",{className:"container mt-4",children:(0,n.jsxs)("form",{onSubmit:p,children:[(0,n.jsx)("h3",{className:"mb-4",children:"Car Tuning Form"}),o.length>0&&(0,n.jsxs)("div",{className:"alert alert-info",children:[(0,n.jsx)("h4",{className:"font-weight-bold",children:"Existing Vehicle Tunings"}),(0,n.jsx)("div",{className:"row",children:o.map(e=>(0,n.jsx)("div",{className:"col-12 col-md-6 mb-4",children:(0,n.jsxs)("div",{className:"border rounded shadow-sm p-3 bg-light",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Tuning Stage:"})," ",e.tuning_stage]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Difference Power:"})," ",e.difference_power," HP"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Difference Torque:"})," ",e.difference_torque," Nm"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Power chart:"})," ",e.power_chart]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Torque chart:"})," ",e.torque_chart]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Price:"})," $",e.price]}),(0,n.jsx)("button",{type:"button",className:"btn btn-primary btn-sm mt-2",onClick:()=>f(e.id),children:"View Eigenschaften"})]})},e.id))})]}),(0,n.jsxs)("div",{className:"form-group row",children:[(0,n.jsx)("label",{htmlFor:"vehicle_id",className:"col-sm-2 col-form-label",children:"Vehicle ID:"}),(0,n.jsx)("div",{className:"col-sm-10",children:(0,n.jsx)("input",{type:"text",id:"vehicle_id",value:s,className:"form-control",disabled:!0})})]}),(0,n.jsxs)("div",{className:"form-group row",children:[(0,n.jsx)("label",{htmlFor:"tuning_id",className:"col-sm-2 col-form-label",children:"Choose Tuning:"}),(0,n.jsx)("div",{className:"col-sm-10",children:(0,n.jsxs)("select",{id:"tuning_id",className:"form-control",onChange:e=>{let s=parseInt(e.target.value,10),n=a.find(e=>e.id===s);n&&!c.some(e=>e.id===s)&&t(e=>[...e,{...n,price:0}])},children:[(0,n.jsx)("option",{value:"",children:"Select a Tuning"}),a.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})})]}),c.map((e,s)=>(0,n.jsxs)("div",{className:"border rounded p-3 mb-4 shadow-sm",children:[(0,n.jsxs)("h4",{className:"text-primary",children:["Tuning: ",e.name]}),(0,n.jsx)("button",{type:"button",className:"btn btn-danger btn-sm float-right",onClick:()=>j(s),children:"Remove"}),(0,n.jsxs)("div",{className:"form-group mt-3",children:[(0,n.jsx)("label",{children:"Difference Power (HP):"}),(0,n.jsx)("input",{type:"number",value:e.difference_power||"",className:"form-control",onChange:e=>g(s,"difference_power",e.target.value)})]}),(0,n.jsxs)("div",{className:"form-group mt-3",children:[(0,n.jsx)("label",{children:"Difference Torque (Nm):"}),(0,n.jsx)("input",{type:"number",value:e.difference_torque||"",className:"form-control",onChange:e=>g(s,"difference_torque",e.target.value)})]}),(0,n.jsxs)("div",{className:"form-group mt-3",children:[(0,n.jsx)("label",{children:"Max Power (HP):"}),(0,n.jsx)("input",{type:"number",value:e.max_power||"",className:"form-control",onChange:e=>g(s,"max_power",e.target.value)})]}),(0,n.jsxs)("div",{className:"form-group mt-3",children:[(0,n.jsx)("label",{children:"Max Torque (Nm):"}),(0,n.jsx)("input",{type:"number",value:e.max_torque||"",className:"form-control",onChange:e=>g(s,"max_torque",e.target.value)})]}),(0,n.jsxs)("div",{className:"form-group mt-3",children:[(0,n.jsx)("label",{children:"Power Chart Data:"}),(0,n.jsx)("input",{type:"text",value:e.power_chart||"",className:"form-control",onChange:e=>g(s,"power_chart",e.target.value)})]}),(0,n.jsxs)("div",{className:"form-group mt-3",children:[(0,n.jsx)("label",{children:"Torque Chart Data:"}),(0,n.jsx)("input",{type:"text",value:e.torque_chart||"",className:"form-control",onChange:e=>g(s,"torque_chart",e.target.value)})]}),(0,n.jsxs)("div",{className:"form-group mt-3",children:[(0,n.jsx)("label",{children:"Price ($):"}),(0,n.jsx)("input",{type:"number",value:e.price||"",className:"form-control",onChange:e=>g(s,"price",e.target.value)})]})]},e.id)),(0,n.jsx)("div",{className:"form-group",children:(0,n.jsx)("button",{type:"submit",className:"btn btn-success btn-block",children:"Submit Tunings"})})]})})},m=()=>{let e=(0,i.useRouter)(),{car_id:s}=e.query,[a,d]=(0,r.useState)(!0),m=(0,r.useCallback)(async()=>{let s=localStorage.getItem("authToken");if(console.log("Token:",s),!s){console.log("No token found, user is not authenticated"),e.push("/");return}try{let a=await fetch("https://back-end.topspeed-performance.de/api/verify",{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}});await a.json(),a.ok?(console.log("Token is valid"),d(!1)):(console.log("Token is invalid"),e.push("/"))}catch(s){console.error("Error verifying token:",s),e.push("/")}},[e]);return((0,r.useEffect)(()=>{m()},[m]),(0,r.useEffect)(()=>{e.isReady&&s&&console.log("Car ID: ".concat(s))},[e.isReady,s]),a)?(0,n.jsx)("div",{children:"Loading..."}):(0,n.jsxs)(l.A,{children:[(0,n.jsx)("div",{className:"circle-bg",children:(0,n.jsxs)("div",{className:"circle-color fixed",children:[(0,n.jsx)("div",{className:"gradient-circle"}),(0,n.jsx)("div",{className:"gradient-circle two"})]})}),(0,n.jsx)(c.A,{theme:"light"}),(0,n.jsx)(t.A,{className:"sub-bg",title:"Details des Autos hinzuf\xfcgen.",paragraph:"Alle aktuellen Auto und Veranstaltungen unseres kreativen Teams."}),(0,n.jsx)(h,{car_id:s}),(0,n.jsx)(o.A,{})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[909,341,636,593,792],()=>s(7570)),_N_E=e.O()}]);